\documentclass[a4paper]{amsart}

\newif\iflmcs\lmcsfalse % <--------------- TOGGLE THIS FOR FINAL VERSION OF LMCS
                        %                  Trash .aux file after toggling
\usepackage{stmaryrd}
\usepackage{graphicx}
\usepackage[lutzsyntax]{virginialake}\vlsmallbrackets\aftrianglefalse
\iflmcs\def\url #1#2{\relax}\else\usepackage[pdfborder={0 0 0}]{hyperref}\fi

%--------- Theorem etc
\newtheorem{thm}{Theorem}[section]
\newtheorem{cor}[thm]{Corollary}
\newtheorem{lem}[thm]{Lemma}
\newtheorem{pro}[thm]{Proposition}

\theoremstyle{remark}
\newtheorem{rem}[thm]{Remark}

\theoremstyle{definition}
\newtheorem{defi}[thm]{Definition}
%---------

%-------------------------------------------------------- REMOVE WHEN PAPER DONE
\newcommand{\Ale}[1]{{\color{NavyBlue}\noindent {\bf A:} #1}}
\newcommand{\Tom}[1]{{\color{PineGreen}\noindent {\bf T:} #1}}
\newcount\todocount\todocount=0
\newcommand{\TODO}[1]{\global\advance\todocount by1%
            {\color{Red}\noindent{\bf\the\todocount\ TODO:} #1}}\vlupdate{\TODO}
%\renewcommand{\Ale}[1]{\relax}  % Comment/uncomment these three lines
%\renewcommand{\Tom}[1]{\relax}  % in order to display/hide inline comments
%\renewcommand{\TODO}[1]{\relax} %
%-------------------------------------------------------- REMOVE WHEN PAPER DONE

\begin{document}

\title[Normalisation Control in Deep Inference   via Atomic Flows II]
      {Normalisation Control in Deep Inference\\ via Atomic Flows II}

\author{Alessio Guglielmi}
\address{University of Bath, Bath BA2 7AY, UK}

\author{Tom Gundersen}
\iflmcs\address{University of Bath, Bath BA2 7AY, UK}\fi

\thanks{This work was in part funded by an Overseas Research Scholarship and a Research Studentship, both from the University of Bath, and by the British Council Alliance Programme.}

\keywords{Normalisation, deep inference, cut elimination, atomic flows}

\subjclass{F.4.1 Mathematical Logic---Proof theory}

\begin{abstract}
\end{abstract}

\maketitle

%===============================================================================
\section{Introduction}
\newcommand{\ot}{\mathbin\shortleftarrow}
\newcommand{\fff}{\mathsf f}
\newcommand{\ttt}{\mathsf t}
\newcommand{\ai}{\mathsf{ai}}
\newcommand{\aw}{\mathsf{aw}}
\newcommand{\ac}{\mathsf{ac}}
\newcommand{\aid}{{\ai{\downarrow}}}
\newcommand{\awd}{{\aw{\downarrow}}}
\newcommand{\acd}{{\ac{\downarrow}}}
\newcommand{\aiu}{{\ai{\uparrow}}}
\newcommand{\awu}{{\aw{\uparrow}}}
\newcommand{\acu}{{\ac{\uparrow}}}
\newcommand{\swi}{\mathsf{s}}
\newcommand{\med}{\mathsf{m}}
\newcommand{\sus}{\mathsf{ss}}
\newcommand{\said}{\mathsf{s}\aid}
\newcommand{\contr}{\mathsf{c}}
\newcommand{\cod}{{\contr{\downarrow}}}
\newcommand{\cou}{{\contr{\uparrow}}}
\newcommand{\SKS}{\mathsf{SKS}}
\newcommand{\ppl  }{{\mathchoice{\scriptstyle+}
                                {\scriptstyle+}
                                {\scriptstyle+}
                                {\scriptscriptstyle+}}}
\newcommand{\pmi  }{{\mathchoice{\scriptstyle-}
                                {\scriptstyle-}
                                {\scriptstyle-}
                                {\scriptscriptstyle-}}}

\Ale{were the previous methods crap?}

\Tom{in my opinion the method shown here is a strict improvement, let me know if you know of any downsides (I might have forgotten)}

\Ale{global?}

In \cite{GuglGund:07:Normalis:lr} we introduced \emph{atomic flows} as a tool to study normalisation. In this paper we focus on global normalisation procedures and show how they provide for more general and principled tools than what we studied before. The paper is in two parts, the first part gives a \emph{confluent} cut-elimination procedure for propositional classical logic and the second part gives a generalisation of the \emph{streamlining} procedure described in \cite{GuglGund:07:Normalis:lr}.

\Ale{is the causual relationship known?}

Atomic flows are graphical representations of derivations conserving their size as well as the causal relationship between the structural inference rules. All information about logical connectives and logical inference rules is disregarded. The crucial property of atomic flows is that they contain all the information necessary to perform normalisation. We can either just normalise the atomic flows, or use the atomic flows to decide how to normalise the derivations.

\Ale{previous sentence, see hand written comments [could not read comment]}

A streamlined derivation is a derivation whose atomic flow has a speciï¬c shape, in particular this entails that

\begin{enumerate}
\item a streamlined derivation contains no causal relationship between an axiom and a cut; and
\item in the special case where the premiss of a streamlined derivation is $\ttt$, the derivation is cut-free.
\end{enumerate}

\Ale{causal relationship not understandable}

\Ale{put a picture}

\Tom{will do (later, when the text is finished)}

Given the atomic flow of a derivation, we can tell what the atomic flow of the streamlined derivation would be. This is of particular interest because the atomic flows do not have access to any information about logical inference rules. This is remarkable because the relationship of the logical inference rules is usually considered crusial to have cut-elimination.

The novelty of this work is to only use global proof transformations when performing normalisation. We single out axioms and cuts and consider the rest of the atomic flow to be inside `black boxes' which we do not need to look inside. Then, by knowing which axioms are connected with which cuts, we can normalise the derivation without having any more information about its internal structure. The streamlining procedures presented in \cite{GuglGund:07:Normalis:lr} had two sources of exponential growth, it was not strongly normalising and the proof of termination was not very intuitive. With the new methods we have removed one source of exponential growth and both termination and strong normalisation are immediate.

\Ale{was there anything good about the previous paper?}
\Ale{isn't strong normalisation enough?}

\section{Deep Inference and Atomic Flows}

Deep inference is a relatively new proof-theoretic methodology developed over the past ten years. Deep inference differs from the traditional Gentzen-style methodology in that it allows inference at any level in formulae, not only at the root connective. This allows for much greater freedom in designing formalisms and logical systems, but it also makes normalisation theory much more challenging.

In this paper, we are working in the deep-inference formalism `calculus of structures' \cite{Gugl:06:A-System:kl}, but the results here are not specific to this formalism as we will discuss later.

The system we use for propositional classical logic is system $\SKS$ \cite{BrunTiu:01:A-Local-:mz}:

\Ale{adjust spacing}

\begin{figure}[h]
\begin{center}
\begin{tabular}{ccc}
$\vlinf{\aid}{}{\vls[a.\bar{a}]}{\ttt}$ & $\vlinf{\acd}{}{a}{\vls[a.a]}$ & $\vlinf{\awd}{}{a}{\fff}$ \\
interaction (axiom) & contraction & weakening \\
\noalign{\bigskip}
\\
$\vlinf{\aiu}{}{\fff}{\vls(\bar{a}.a)}$ & $\vlinf{\acu}{}{\vls(a.a)}{a}$ & $\vlinf{\awd}{}{\ttt}{a}$ \\
cointeraction (cut) & cocontraction & coweakening \\
\noalign{\bigskip}
\\
\end{tabular}
\begin{tabular}{cc}
$\vlinf{\swi}{}{\vls[(\alpha.\beta).\gamma]}{\vls(\alpha.[\beta.\gamma])}$ &
$\vlinf{\med}{}{\vls([\alpha.\beta].[\gamma.\delta])}{\vls[(\alpha.\gamma).(\beta.\delta)]}$ \\
switch & medial
\end{tabular}
\end{center}
\end{figure}

Furmulae are considered equal modulo associativity and commutativity of $\wedge$ and $\vee$, and idempotency and identity of $\ttt$ and $\fff$. Furthermore, negation is only allowed on atoms which is possible due to De Morgan's laws.

In this paper we will mainly concern ourselves with the structural rules.
%===============================================================================
\section{Streamlining via Experiments}

\begin{defi}
Let $\Phi$ be a derivation from $\alpha$ to $\beta$ containing $N$ different atoms, $k_i$ interactions and $l_i$ cointeractions on atom $i$. Consider the derivaiton obtained by permuting all the interactions to the top and the cointeractions to the bottom:
\[
\vlderivation
{
 \vlde{}{\{\aiu\}}{\beta}
 {
  \vlde{\Phi_c}{\SKS\setminus\{\aid,\aiu\}}{\beta_n=\vls[\beta.\bigvee_{i=1}^n\bigvee_{j=1}^{l_i}(a_i.{\bar a_i})]}
  {
   \vlde{}{\{\aid\}}{\vls(\alpha.\bigwedge_{i=1}^N\bigwedge_{j=1}^{k_i}[a_i.{\bar a_i}])}
   {
    \vlhy{\alpha}
   }
  }
 }
}\quad,
\]
then $\Phi_c$ is called the \emph{core} of $\Phi$.
\end{defi}

\begin{thm}
Let $\Phi$ be a derivation from $\alpha$ to $\beta$. Then there exist a streamlined derivation $\Psi$ from $\alpha$ to $\beta$.
\end{thm}

\begin{proof}
Let $\Phi$ have $N$ atoms and for all $n\leq N$ define:
\[
\alpha_n=\vls(\alpha.\bigwedge_{i=1}^n\bigwedge_{j=1}^{k_i}[a_i.{\bar a_i}])\qquad
\beta_n=\vls[\beta.\bigvee_{i=1}^n\bigvee_{j=1}^{l_i}(a_i.{\bar a_i})]
\]
In particur that means  that the core of $\Phi$ is $\vlder{\Phi_c}{}{\beta_N}{\alpha_N}$. We now define the derivation $\Psi$. Let $\Psi=\Psi_0$, $\Psi_N=\Phi_c$ and $\Psi_n$ where $0\leq n<N$ is defined by:
\[
\Delta_{n,1}=
   \vlderivation
   {
    \vlin{\awu}{}{\vls[\beta_n.{\bar a_{n+1}}]}
    {
     \vlin{\cou^\star}{}{\vls[\beta_n.(a_{n+1}.{\bar a_{n+1}})]}
     {
      \vlde{\Psi_{n+1}}{}{\beta_{n+1}}
      {
       \vlin{\cod^\star}{}{\alpha_{n+1}}
       {
        \vlin{\aid}{}{\vls(\alpha_n.[a_n.{\bar a_{n+1}}])}
        {
        \vlhy{\alpha_n}
        }
       }
      }
     }
    }
   }
\Delta_{n,2}=
   \vlderivation
   {
    \vlin{\awu}{}{\vls[\beta_n.a_{n+1}]}
    {
     \vlin{\cou^\star}{}{\vls[\beta_n.(a_{n+1}.{\bar a_{n+1}})]}
     {
      \vlde{\Psi_{n+1}}{}{\beta_{n+1}}
      {
       \vlin{\cod^\star}{}{\alpha_{n+1}}
       {
        \vlin{\awd}{}{\vls(\alpha_n.[a_n.{\bar a_{n+1}}])}
        {
        \vlhy{\vls(\alpha_n.{\bar a_{n+1}})}
        }
       }
      }
     }
    }
   }
\]
\[
\Delta_{n,3}=
   \vlderivation
   {
    \vlin{\awu}{}{\vls[\beta_n.{\bar a_{n+1}}]}
    {
     \vlin{\cou^\star}{}{\vls[\beta_n.(a_{n+1}.{\bar a_{n+1}})]}
     {
      \vlde{\Psi_{n+1}}{}{\beta_{n+1}}
      {
       \vlin{\cod^\star}{}{\alpha_{n+1}}
       {
        \vlin{\awd}{}{\vls(\alpha_n.[a_n.{\bar a_{n+1}}])}
        {
        \vlhy{\vls(\alpha_n.a_{n+1})}
        }
       }
      }
     }
    }
   }
\Delta_{n,4}=
   \vlderivation
   {
    \vlin{\aiu}{}{\beta_n}
    {
     \vlin{\cou^\star}{}{\vls[\beta_n.(a_{n+1}.{\bar a_{n+1}})]}
     {
      \vlde{\Psi_{n+1}}{}{\beta_{n+1}}
      {
       \vlin{\cod^\star}{}{\alpha_{n+1}}
       {
        \vlin{\awd}{}{\vls(\alpha_n.[a_n.{\bar a_{n+1}}])}
        {
        \vlhy{\vls(\alpha_n.{\bar a_{n+1}})}
        }
       }
      }
     }
    }
   }
\]
\[
\Psi_n=\vlderivation
{
 \vlin{\cod}{}{\beta_n}
 {
  \vlin{\swi}{}{\vls[\beta_n.\beta_n.\beta_n.\Delta_{n,4}]}
  {
   \vlin{\swi}{}{\vls([\beta_n.\beta_n.\Delta_{n,3}].\alpha_n)}
   {
    \vlin{\swi}{}{\vls([\beta_n.\Delta_{n,2}].\alpha_n.\alpha_n)}
    {
     \vlin{\cou}{}{\vls(\Delta_{n,1}.\alpha_n.\alpha_n.\alpha_n)}
     {
      \vlhy{\alpha_n}
     }
    }
   }
  }
 }
}
\]
By studying the atomic flow of this derivation and verifying that there is no connection between an interaction and a cointeraction the result follows (we need to perform a simple induction argument here once we have the atomic flows).

\TODO{What if $k_i$ or $l_i$ is 0?}

\end{proof}


\iflmcs\else\let\oldurl\url\renewcommand{\url}[1]{\hfill\break\oldurl{#1}}\fi

\bibliographystyle{alpha}
\bibliography{di-biblio}

\end{document}